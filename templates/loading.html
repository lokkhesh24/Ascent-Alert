<!DOCTYPE html>
<html>
<head>
    <title>Loading...</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">
</head>
<body class="loading-body">
    <div class="loading-container">
        <div class="speedometer-wrapper">
            <div class="speedometer">
                <svg id="speedometer" viewBox="0 0 300 300" width="300" height="300">
                    <!-- Static outer circle -->
                    <circle cx="150" cy="150" r="135" fill="none" stroke="url(#speedGradient)" stroke-width="30"/>
                    <!-- Semi-circle speedometer inside -->
                    <g transform="rotate(-90 150 150)">
                        <path id="speedometer-semi" d="M 150 15 A 135 135 0 0 1 285 150" fill="none" stroke="#1C2526" stroke-width="20"/>
                        <line id="needle" x1="150" y1="150" x2="270" y2="150" stroke="#FF0000" stroke-width="4"/>
                    </g>
                    <text x="150" y="165" text-anchor="middle" fill="white" font-size="20">0 km/h</text>
                    <defs>
                        <linearGradient id="speedGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#00F"/>
                            <stop offset="50%" stop-color="#FFA500"/>
                            <stop offset="100%" stop-color="#FF0000"/>
                        </linearGradient>
                    </defs>
                </svg>
            </div>
        </div>
        <div class="driving-tips">
            <p id="tip">"Drive cautiously on sharp turns to avoid skidding and accidents."</p>
        </div>
    </div>
    <script>
        let speed = 0;
        const speedElement = document.querySelector('svg text');
        const needle = document.getElementById('needle');
        const tipsElement = document.getElementById('tip');
        const tips = [
            '"Drive cautiously on sharp turns to avoid skidding and accidents."',
            '"Use fog lights during low visibility conditions like rain or fog."',
            '"Avoid overtaking on curves especially when traffic density is high."',
            '"Never drive under the influence of alcohol on ghat roads."',
            '"Maintain a safe distance from other vehicles on wet roads."',
            '"Slow down to 20 km/h on steep slopes to ensure control."',
            '"Check your brakes before driving on ghat roads for safety."'
        ];
        let tipIndex = 0;

        // Update driving tips
        setInterval(() => {
            tipIndex = (tipIndex + 1) % tips.length;
            tipsElement.textContent = tips[tipIndex];
        }, 2000);

        // Update speedometer needle
        const interval = setInterval(() => {
            speed += 1;
            speedElement.textContent = `${speed} km/h`;
            const rotation = (speed / 100) * 180 - 90; // Rotate needle from -90 to 90 degrees
            needle.setAttribute('transform', `rotate(${rotation} 150 150)`);
            if (speed >= 100) {
                clearInterval(interval);
                window.location.href = '/login';
            }
        }, 50);
    </script>
</body>
</html>